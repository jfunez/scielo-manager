{% load i18n %}
{% load tz %}
<div class="row-fluid show-grid">
  <div class="span12">

    <div class="page-header">
      <h2><small>{% trans "Article" %}:</small> {{ checkin.article.article_title }}</h2>
      <h2><small>{% trans "Package" %}:</small> {{ checkin.package_name }}</h2>
    </div>
    <div class="row-fluid show-grid">
      <div class="span6">
        <div class="well">
          <h4>{% trans "Article Information" %}:</h4>
          <dl class="dl-horizontal">
            <dt>{% trans "Title" %}</dt>
            <dd>{{ checkin.article.article_title }}</dd>
            <dt>{% trans "Journal title" %}</dt>
            <dd>{{ checkin.article.journal_title }}</dd>
            <dt>{% trans "Issue label" %}:</dt>
            <dd>{{ checkin.article.issue_label }}</dd>
          </dl>
        </div>

        {% include "articletrack/includes/checkin_status_notice_block.html" %}

      </div>

      <div class="span6 well">
        <h4>{% trans "Check-in Information" %}:</h4>
        <dl class="dl-horizontal">
          <dt>{% trans "Id" %}:</dt>
          <dd>{{ checkin.pk }}</dd>
          <dt>{% trans "Status" %}:</dt>
          <dd>
            {% if checkin.status == 'pending' %}
              <i class='icon-time'></i>
            {% elif checkin.status == 'review' %}
              <i class='icon-eye-open'></i>
            {% elif checkin.status == 'rejected' %}
              <i class='icon-eye-close'></i>
            {% elif checkin.status == 'accepted' %}
              <i class='icon-ok-circle'></i>
            {% elif checkin.status == 'checkout_scheduled' %}
              <i class='icon-time'></i>
            {% elif checkin.status == 'checkout_confirmed' %}
              <i class='icon-ok'></i>
            {% else %}
              <i class='icon-question-sign'></i>
            {% endif %}
            {{ checkin.get_status_display }}
          </dd>
          <dt>{% trans "Package name" %}:</dt>
          <dd>{{ checkin.package_name }}</dd>
          <dt>{% trans "Updated at" %}:</dt>
          <dd>{{ checkin.created_at|timezone:user.get_profile.tz|date:"d/m/Y - H:i" }}</dd>
          <dt>{% trans "Submitted by" %}:</dt>
          {% if checkin.submitted_by %}
            <dd>
            {% with checkin.submitted_by as user %}
              {% include "articletrack/includes/gravatar_tooltip.html" %}
            {% endwith %}
            </dd>
          {% else %}
            <dd>--</dd>
          {% endif %}

          {% if checkin.is_level1_reviewed or  checkin.is_level2_reviewed or checkin.is_accepted or checkin.is_rejected or checkin.is_scheduled_to_checkout or checkin.is_checked_out %}

            {%if checkin.reviewed_by %}
              <dt style="text-align: left;"><em>{% trans "Editorial review" %}:</em></dt>
              <dd>&nbsp;</dd>
              <dt>{% trans "Reviewed by" %}:</dt>
              <dd>
                {% with checkin.reviewed_by as user %}
                  {% include "articletrack/includes/gravatar_tooltip.html" %}
                {% endwith %}
              </dd>
              <dt>{% trans "Reviewed at" %}:</dt>
              <dd>{{ checkin.reviewed_at|timezone:user.get_profile.tz|date:"d/m/Y - H:i" }}</dd>
            {% endif %}

            {%if checkin.scielo_reviewed_by %}
              <dt style="text-align: left;"><em>{% trans "SciELO review" %}:</em></dt>
              <dd>&nbsp;</dd>
              <dt>{% trans "Reviewed by" %}:</dt>
              <dd>
                {% with checkin.scielo_reviewed_by as user %}
                  {% include "articletrack/includes/gravatar_tooltip.html" %}
                {% endwith %}
              </dd>
              <dt>{% trans "Reviewed at" %}:</dt>
              <dd>{{ checkin.scielo_reviewed_at|timezone:user.get_profile.tz|date:"d/m/Y - H:i" }}</dd>
            {% endif %}

          {% endif %}

          {% if checkin.is_accepted or checkin.is_scheduled_to_checkout or checkin.is_checked_out  %}
              <dt style="text-align: left;"><em>{% trans "Acceptance info" %}:</em></dt>
              <dd>&nbsp;</dd>
              <dt>{% trans "Accepted by" %}:</dt>
              <dd>
                {% with checkin.accepted_by as user %}
                  {% include "articletrack/includes/gravatar_tooltip.html" %}
                {% endwith %}
              </dd>
              <dt>{% trans "Accepted at" %}:</dt>
              <dd>{{ checkin.accepted_at|timezone:user.get_profile.tz|date:"d/m/Y - H:i" }}</dd>

          {% elif checkin.is_rejected %}
              <dt style="text-align: left;"><em>{% trans "Rejection info" %}:</em></dt>
              <dd>&nbsp;</dd>
              <dt>{% trans "Rejected by" %}:</dt>
              <dd>
                {% with checkin.rejected_by as user %}
                  {% include "articletrack/includes/gravatar_tooltip.html" %}
                {% endwith %}
              </dd>
              <dt>{% trans "Rejected at" %}:</dt>
              <dd>{{ checkin.rejected_at|timezone:user.get_profile.tz|date:"d/m/Y - H:i" }}</dd>
              <dt>{% trans "Rejected reason" %}:</dt>
              <dd>{{ checkin.rejected_cause }}</dd>

          {% endif %}

          {% if checkin.status == "pending" and checkin.expiration_at %}
              <dt>{% trans "Will Expire at" %}:</dt>
              <dd>
                <span class="label label-important">
                  {{ checkin.expiration_at|timezone:user.get_profile.tz|date:"d/m/Y - H:i" }}
                </span>
              </dd>
          {% endif %}

        </dl>
      </div>

    </div>

  </div>
</div>
